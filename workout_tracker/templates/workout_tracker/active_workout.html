{% extends "base.html" %}
{% load static %}

{% block content %}

{% for error in errors %}
    {{ error }}
{% endfor %}  
{% if in_progress == False %}
<div class="container">    
    <form id="workout-sets" class="mt-3" action="{% url 'active_workout' %}" method="POST">
        {% csrf_token %}
        <div class="form-row exercise-row">
            <div class="form-group col-4">
                <label for="exercise-1-name">Exercise 1</label>
                <input type="text" id="exercise-1-name" class="exercise-name form-control" name="exercise-1-name" required>
            </div>
            <div class="form-group col-2">
                <label for="exercise-1-sets">Sets</label>
                <input id="exercise-1-sets" class="set-count form-control" type="number" name="exercise-1-sets" required>
            </div>
            <div class="form-group col-2">
                <label for="exercise-1-reps">Reps</label>
                <input id="exercise-1-reps" class="form-control" type="number" name="exercise-1-reps" required>
            </div>
            <div class="form-group col-4">
                <label for="log-exercise-1">&nbsp;</label>
                <button id="log-exercise-1" class="btn btn-outline-secondary w-100 form-control log-exercise" name="log-exercise-1" type="button"><i class="fas fa-check"></i></button>                
            </div>
        </div>
        <hr id="form-separator" class="mt-0 w-50">       
        <div id="rest-timer-container" class="form-row">
            <div class="form-group col-6">
                <button id="rest-timer" class="btn btn-outline-secondary form-control" type="button"><i class="fas fa-stopwatch"></i></button>
            </div>
            <div class="form-group col-6">
                <button id="add-exercise" class="btn btn-outline-secondary form-control" name="log-exercise" type="button"><i class="fas fa-plus"></i>   <i class="fas fa-dumbbell"></i></button>
            </div>
        </div>
        <div id="button-container" class="form-row justify-content-center">
            <div class="form-group col-6"> 
                <button class="btn btn-outline-primary form-control" id="save" type="submit">Save</button>
            </div>
        </div>
    </form>
</div>
{% else %}
    <a href="{% url 'delete_active_workout' %}">Delete workout</a>
    <form id="workout-sets" class="mt-3" action="{% url 'active_workout' %}" method="POST">
        {% csrf_token %}
        {% for exercise in workout %}
            <input type="text" id="exercise-{{ forloop.counter }}-name" class="exercise-name" name="exercise-{{ forloop.counter }}-name" placeholder="exercise_name" value="{{ exercise.exercise }}">
            <input id="exercise-{{ forloop.counter }}-sets" class="set-count" type="number" name="exercise-{{ forloop.counter }}-sets" placeholder="sets" value="{{ exercise.sets }}">
            <input id="exercise-{{ forloop.counter }}-reps" type="number" name="exercise-{{ forloop.counter }}-reps" placeholder="reps" value="{{ exercise.reps }}">
            <br>
            {% for set in exercise.set_volumes %}
                <input type="number" step="0.5" name="weight-{{ forloop.counter }}-exercise-{{ forloop.parentloop.counter }}" placeholder="weight" value="{{ set.weight }}">
                <input type="number" name="reps-{{ forloop.counter }}-exercise-{{ forloop.parentloop.counter }}" placeholder="reps" value="{{ set.rep_count }}">
                <input type="number" step="0.5" name="rpe-{{ forloop.counter }}-exercise-{{ forloop.parentloop.counter }}" placeholder="rpe" value="{{ set.rpe }}">
                <br>
            {% endfor %}
        {% endfor %}
        <br>   
        <button type="submit">Save</button>
    </form>
    <button id="start">Start</button>
    <button id="add-exercise">Add exercise</button>
{% endif %}   

{% endblock %}

{% block postloadjs %}
    {{ block.super }}
    <script src="{% static 'workout_tracker/js/dynamic_form.js' %}"></script>
{% endblock %}