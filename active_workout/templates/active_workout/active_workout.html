{% extends "base.html" %}
{% load static %}

{% block content %}

{{ errors }}  
{% if in_progress == False %}    
    <form id="workout-sets" class="mt-3" action="{% url 'active_workout' %}" method="POST">
        {% csrf_token %}
        <input type="text" id="exercise-1-name" class="exercise-name" name="exercise-1-name" placeholder="exercise_name">
        <input id="exercise-1-sets" class="set-count" type="number" name="exercise-1-sets" placeholder="sets">
        <input id="exercise-1-reps" type="number" name="exercise-1-reps" placeholder="reps">
        <br>   
        <button type="submit">Save</button>
    </form>
    <button id="start">Start</button>
    <button id="add-exercise">Add exercise</button>
{% else %}
    <a href="{% url 'delete_active_workout' %}">Delete workout</a>
    <form id="workout-sets" class="mt-3" action="{% url 'active_workout' %}" method="POST">
        {% csrf_token %}
        {% for exercise in workout %}
            <input type="text" id="exercise-{{ forloop.counter }}-name" class="exercise-name" name="exercise-{{ forloop.counter }}-name" placeholder="exercise_name" value="{{ exercise.exercise }}">
            <input id="exercise-{{ forloop.counter }}-sets" class="set-count" type="number" name="exercise-{{ forloop.counter }}-sets" placeholder="sets" value="{{ exercise.sets }}">
            <input id="exercise-{{ forloop.counter }}-reps" type="number" name="exercise-{{ forloop.counter }}-reps" placeholder="reps" value="{{ exercise.reps }}">
            <br>
            {% for set in exercise.set_volumes %}
                <input type="number" step="0.5" name="weight-{{ forloop.counter }}-exercise-{{ forloop.parentloop.counter }}" placeholder="weight" value="{{ set.weight }}">
                <input type="number" name="reps-{{ forloop.counter }}-exercise-{{ forloop.parentloop.counter }}" placeholder="reps" value="{{ set.rep_count }}">
                <input type="number" step="0.5" name="rpe-{{ forloop.counter }}-exercise-{{ forloop.parentloop.counter }}" placeholder="rpe" value="{{ set.rpe }}">
                <br>
            {% endfor %}
        {% endfor %}
        <br>   
        <button type="submit">Save</button>
    </form>
    <button id="start">Start</button>
    <button id="add-exercise">Add exercise</button>
{% endif %}   

{% endblock %}

{% block postloadjs %}
    {{ block.super }}
    <script src="{% static 'active_workout/js/dynamic_form.js' %}"></script>
{% endblock %}